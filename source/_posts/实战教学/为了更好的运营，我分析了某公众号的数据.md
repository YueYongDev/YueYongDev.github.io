---
title: ä¸ºäº†æ›´å¥½çš„è¿è¥ï¼Œæˆ‘å‰–æäº†æŸå…¬ä¼—å·çš„æ•°æ®
categories:
  - å®æˆ˜æ•™å­¦
tags:
  - æ•°æ®åˆ†æ
  - python
abbrlink: 9fa7
cover: http://upload-images.jianshu.io/upload_images/5666077-0a392c923a0b3e95.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
---

> å®Œæ•´æºç å¯åœ¨å…¬ä¼—å·ï¼šã€Œ01 äºŒè¿›åˆ¶ã€åå°å›å¤ï¼šã€Œå…¬ä¼—å·æ•°æ®åˆ†æã€è·å–

## 1. å‰è¨€

åœ¨åŒå­¦çš„å½±å“ä¸‹ï¼Œæˆ‘åœ¨ 18 å¹´ 9 æœˆæ³¨å†Œäº†ä¸€ä¸ªå…¬ä¼—å·ã€Œ01 äºŒè¿›åˆ¶ã€ï¼Œå› ä¸ºç§ç§åŸå› ï¼ˆå…¶å®å°±æ˜¯æ‡’ï¼‰ç›´åˆ° 11 æœˆ 11 æ—¥æ‰åœ¨è¿™ä¸ªå…¬ä¼—å·ä¸Šå‘å¸ƒäº†ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚åˆ°å†™è¿™ç¯‡æ–‡çš„æ—¶å€™ï¼Œæˆ‘å·²ç»å‘å¸ƒè¿‡ 21 ç¯‡æ–‡ç« ï¼Œç”¨æˆ·ä¹Ÿåªæœ‰ 86 äººï¼Œè¿™ä¸ç¦å¼•å‘äº†æˆ‘æ·±æ·±çš„æ€è€ƒã€‚ä¸ºå•¥æˆ‘çš„å…¬å·æ²¡æœ‰ç”¨æˆ·ï¼Ÿ

![](http://upload-images.jianshu.io/upload_images/5666077-0f176383d061438e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä¸ºæ­¤æˆ‘è¿˜ç‰¹åœ°è¯·æ•™äº†æˆ‘çš„å¥½å‹ ğŸ” å“¥ï¼Œä»–å‘Šè¯‰æˆ‘ï¼Œæ–‡ç¬”æ˜¯ä¸€æ–¹é¢ï¼Œå¦ä¸€æ–¹é¢è¿˜è¦èƒ½æŠ“ä½çƒ­ç‚¹ï¼Œè¯´å®Œä¾¿ç»™æˆ‘å‘äº†ä¸€ä»½æŸçŸ¥åå…¬ä¼—å·çš„ç›¸å…³æ•°æ®ï¼Œè®©æˆ‘ç»™å®‰æ’å®‰æ’ã€‚

![](http://upload-images.jianshu.io/upload_images/5666077-97ec66c605dad825?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è¿™ä¸ï¼Œä¸€åˆ†ææ‰å‘ç°åŸæ¥æƒ³è®©å…¬ä¼—å·æœ‰é˜…è¯»é‡ä¹Ÿæ˜¯è¦è®²ç©¶å¥—è·¯çš„ï¼Œæ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä»¥ä¸€ä¸ª coder çš„è§’åº¦å»åˆ†æä¸‹ç©¶ç«Ÿæ˜¯å“ªäº›å¥—è·¯å§ã€‚

## 2. åˆ†æç›®çš„

ç¬”è€…åœ¨æœ¬é¡¹ç›®ä¸­çš„åˆ†æç›®çš„ä¸»è¦æœ‰ 3 ä¸ªï¼š

ï¼ˆ1ï¼‰å¯¹æŸçŸ¥åå…¬ä¼—å·å†…å®¹è¿è¥æ–¹é¢çš„è‹¥å¹²åˆ†æï¼Œä¸»è¦æ˜¯å¯¹å‘æ–‡é‡ã€ç‚¹èµé‡ã€å‘æ–‡æ—¶é—´ç­‰æ–¹é¢çš„æè¿°æ€§åˆ†æï¼›

ï¼ˆ2ï¼‰é€šè¿‡å¯¹æ ‡é¢˜çš„åˆ†æï¼Œæ¥è¯´æ˜ä»€ä¹ˆæ ·æ ‡é¢˜æ›´å—äººå–œæ¬¢ï¼›

ï¼ˆ3ï¼‰å°†å†—æ‚æ— åºçš„ç»“æ„åŒ–æ•°æ®å’Œéç»“æ„åŒ–æ•°æ®è¿›è¡Œå¯è§†åŒ–ï¼Œå±•ç°æ•°æ®ä¹‹ç¾ã€‚

## 3. å®éªŒç¯å¢ƒ

å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼Œåœ¨å¼€å§‹åˆ†æä¹‹å‰ï¼Œæˆ‘å…ˆè¯´æ˜æ­¤æ¬¡åˆ†ææ‰€å¤„çš„å®éªŒç¯å¢ƒï¼Œä»¥å…å‡ºç°å¼‚å¸¸ï¼š

- MacOS 10.14.3
- Python 3.6.8ï¼ˆAnacondaï¼‰
- Visual Studio Codeï¼ˆå¼€å‘ï¼‰
- Jupyter Notebookï¼ˆè°ƒè¯•ç¯å¢ƒï¼‰
- ä½¿ç”¨çš„åŒ…æœ‰ï¼š
  - pkusegï¼ˆåˆ†è¯ï¼‰
  - pyechartsï¼ˆç»˜å›¾ï¼‰
  - numpyï¼ˆæ•°å­¦è®¡ç®—ï¼‰
  - pandasï¼ˆæ•°æ®è®¡ç®—ï¼‰

## 4. æ•°æ®è·å–åŠé¢„è§ˆ

### 4.1 æ•°æ®è·å–

æœ¬æ¬¡æ•°æ®é›†æ˜¯é€šè¿‡ç½‘ç»œçˆ¬è™«çˆ¬å–æŸå…¬ä¼—å·çš„æ‰€ä»¥æ–‡ç« æ•´ç†è€Œæˆï¼Œè¯¥éƒ¨åˆ†ä¸è¿›è¡Œé˜è¿°ï¼Œéœ€è¦æ•°æ®é›†å¯ä»¥ç›´æ¥ä¸‹è½½æºç æŸ¥çœ‹æˆ–è€…åœ¨å…¬ä¼—å·ï¼šã€Œ01 äºŒè¿›åˆ¶ã€åå°å›å¤ï¼šã€Œå…¬ä¼—å·æ•°æ®é›†ã€è·å–ã€‚

### 4.2 æ•°æ®é¢„è§ˆ

åœ¨è¯¥é¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨äº† Pandas è¿›è¡Œæ•°æ®çš„è¯»å–å’Œé¢„è§ˆï¼ŒPandas åœ¨æ•°æ®ç§‘å­¦ä¸­ä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»æœç´¢ç›¸å…³èµ„æ–™äº†è§£ä¸‹ã€‚

æ•°æ®é¢„è§ˆä»£ç å¦‚ä¸‹ï¼š

```python
import pandas as pd
# è¯»å–æ•°æ®é›†
df=pd.read_excel('data/data.xlsx')
# æ˜¾ç¤ºå‰äº”è¡Œæ•°æ®
df.head()
```

æ­¤æ¬¡çš„æ•°æ®é›†é•¿ä¸‹é¢è¿™æ · ğŸ‘‡ï¼š

![](http://upload-images.jianshu.io/upload_images/5666077-bb761b35cf132b55?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æˆ‘ç»Ÿè®¡äº†ä¸‹ï¼Œæˆªè‡³ 2019 å¹´ 1 æœˆ 22 æ—¥ï¼Œè¯¥å…¬ä¼—å·æ€»å…±å‘è¡¨æ–‡ç«  1111 ç¯‡ï¼ˆå¯¹å•èº« ğŸ¶ è¿˜çœŸæ˜¯ä¸€ä¸ªå‹å¥½çš„æ•°å­—å‘¢ï¼‰ã€‚

## 5. æè¿°æ€§åˆ†æ

è¯¥éƒ¨åˆ†ä¸­ï¼Œç¬”è€…å°†ä¼šå¯¹è¯¥æ•°æ®é›†ä¸­ä¸»è¦çš„æ•°å€¼å‹æ•°æ®è¿›è¡Œæè¿°æ€§çš„ç»Ÿè®¡åˆ†æï¼Œå±äºè¾ƒä¸ºå¸¸è§„çš„æ•°æ®åˆ†æï¼Œèƒ½æ­ç¤ºå‡ºä¸€äº›é—®é¢˜ã€‚å¯è§†åŒ–å·¥å…·é‡‡ç”¨çš„æ˜¯**pyecharts**ï¼Œå®˜ç½‘åœ°å€ï¼šhttp://pyecharts.org/#/ï¼Œæ¨èä½¿ç”¨ä»–çš„åŸå› æ˜¯å› ä¸ºä»–çš„å›¾è¡¨å¥½çœ‹ï¼ˆé¢œå³æ­£ä¹‰ï¼‰ã€‚

### 5.1 æ–‡ç« æ¥æº

å•é ä¸€ä¸ªäººçš„åŠ›é‡æƒ³è¦è®©å…¬ä¼—å·ä¿æŒæ¯æ—¥ä¸€æ–‡çš„æ´»è·ƒåº¦å¾ˆéš¾ã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šå…¬ä¼—å·éƒ½ä¼šé€‚æ—¶çš„è½¬è½½ä¸€äº›åˆ«äººå†™çš„æ¯”è¾ƒå¥½çš„æ–‡ç« ã€‚ä½†å¦‚æœè½¬è½½æ–‡ç« è¿‡å¤šï¼ŒåŸåˆ›æ€§å°±å¤§å¤§é™ä½äº†ï¼Œé‚£ä¹ˆæ¯”ä¾‹è¦å¤šå°‘æ¯”è¾ƒå¥½å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹è¯¥çŸ¥åå…¬ä¼—å·çš„è½¬è½½æ–‡ç« æ•°é‡å’ŒåŸåˆ›æ–‡ç« æ•°é‡å§ï¼š

```python
# è·å–è½¬è½½æ–‡ç« 
df_copy = df[df['åŸæ–‡é“¾æ¥'].str.len() > 5]
print('è½¬è½½æ–‡ç« æ•°é‡ä¸ºï¼š'+str(len(df_copy)))
print('åŸåˆ›æ–‡ç« æ•°é‡ä¸ºï¼š'+str(len(df)-len(df_copy)))
```

åœ¨è¯¥æ•°æ®é›†ä¸­ï¼Œåªè¦åŸæ–‡é“¾æ¥è¿™ä¸€æ é‡Œæœ‰æ•°æ®çš„åˆ™é»˜è®¤ä¸ºè½¬è½½ï¼Œæ²¡æœ‰æ•°æ®çš„é»˜è®¤ä¸ºåŸåˆ›ï¼Œè¾“å‡ºçš„ç»“æœä¸ºï¼š

```
è½¬è½½æ–‡ç« æ•°é‡ä¸ºï¼š249
åŸåˆ›æ–‡ç« æ•°é‡ä¸ºï¼š862
```

ç²—ç•¥è®¡ç®—ä¸‹æ¯”ä¾‹å¤§çº¦ä¸º**3.5:1**

### 5.2 ä»–åˆ°åº•æœ‰å¤šç«

ä»æ–‡ç« å¼€å§‹æˆ‘å°±åœ¨è¯´è¿™ä¸ªæ•°æ®é›†æ˜¯æŸçŸ¥åå…¬ä¼—å·çš„æ•°æ®é›†ï¼Œé‚£ä¹ˆåˆ°åº•æœ‰å¤šçŸ¥åå‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬ä»å‘æ–‡æ•°é‡ã€ç‚¹èµæ•°é‡å’Œå¹³å‡æ¯ç¯‡æ–‡ç« çš„ç‚¹èµæ•°é‡å…¥æ‰‹æ¥ä¸€æ¢ç©¶ç«Ÿã€‚

å…¶å®è¿™ä¸ªéƒ¨åˆ†çš„æ€è·¯ä¸éš¾ï¼šåªéœ€è¦åˆ›å»ºä¸€ä¸ª 5 è¡Œ 4 åˆ—ï¼ˆè¡¨ç¤º 5 å¹´ï¼Œ4 ä¸ªå­£åº¦ï¼‰çš„çŸ©é˜µï¼Œè·å–åˆ°æ—¶é—´æ‰€åœ¨çš„å¹´ä»½å’Œå­£åº¦åå†åœ¨ç›¸åº”ä½ç½®ä¸ŠåŠ  1ï¼š

```python
# è·å–æ–‡ç« æ•°éšå­£åº¦å˜åŒ–çš„çŸ©é˜µ
def getPostJiDu(df):
    # ç”Ÿæˆä¸€ä¸ª5è¡Œ4åˆ—å…¨ä¸º0çš„çŸ©é˜µ
    list_jidu = [[0]*4 for i in range(5)]
    for articleTime in df['å‘æ–‡æ—¶é—´']:
        # è·å–æ—¥æœŸ
        date = str(articleTime).split(' ')[0]
        # è·å–æ‰€åœ¨å¹´ä»½
        year = getYear(date)
        # è·å–æ‰€åœ¨å­£åº¦
        jidu = getJiDu(date)
        list_jidu[year-2015][jidu-1] += 1
    return list_jidu
```

ç„¶ååœ¨åˆ©ç”¨**pyecharts**å°†å›¾æ ‡ç”»å‡ºæ¥å³å¯ï¼š

```python
# ç”»å‡ºå‘æ–‡æ•°é‡éšå­£åº¦å˜åŒ–çš„èµ°åŠ¿å›¾
def drawPostJiDu(df):
    # è·å–æ–‡ç« å­£åº¦çŸ©é˜µ
    res_list = getPostJiDu(df)
    # æ„é€ æ ‡é¢˜åˆ—è¡¨
    attr = []
    for year in range(len(res_list)):
        for month in range(len(res_list[year])):
            attr.append("{}å¹´ç¬¬{}å­£åº¦".format(str(year+2015),str(month+1)))

    # æ„é€ å€¼åˆ—è¡¨
    v1 = reduce(operator.add, res_list)

    # å»æ‰æ— ç”¨å€¼
    attr = attr[2:-3]
    v1 = v1[2:-3]

    line = Line("å‘æ–‡æ•°é‡å˜åŒ–èµ°åŠ¿å›¾", width=1500, height=500)
    line.add("æŸçŸ¥åå…¬ä¼—å·", attr, v1, is_stack=True,
             is_label_show=True, is_smooth=True, is_fill=True,  xaxis_name='å­£åº¦', yaxis_name='å‘æ–‡æ•°',xaxis_rotate=30)
    return line
```

> è¿™é‡Œæä¸€ä¸‹ï¼Œå› ä¸ºè¯¥å…¬ä¼—å· 2015 å¹´ç¬¬ 1ã€2 å­£åº¦å’Œ 2019 å¹´ 2ã€3ã€4 å­£åº¦å‡æ²¡æœ‰æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œä¸€æ­¥å»æ‰æ— ç”¨å€¼çš„æ“ä½œã€‚

![1](http://upload-images.jianshu.io/upload_images/5666077-48469c449983668b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä»¥æ­¤ç±»æ¨æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾—åˆ°ç‚¹èµæ•°é‡éšæ—¶é—´å˜åŒ–çš„èµ°åŠ¿å›¾ï¼š

![](http://upload-images.jianshu.io/upload_images/5666077-8e05e39f9a81b1ff?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä¸‹é¢æ˜¯å¹³å‡æ¯ç¯‡æ–‡ç« ç‚¹èµæ•°é‡çš„å˜åŒ–ã€‚

![](http://upload-images.jianshu.io/upload_images/5666077-ee9adbfca2362958?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸ªå…¬ä¼—å·çš„æµé‡çœŸçš„ä¸å®¹å°è§‘ï¼Œå¹³å‡ä¸€ç¯‡æ–‡ç« èƒ½æœ‰ 1w+çš„ç‚¹èµé‡ï¼ˆè¿˜ä¸ç®—é˜…è¯»é‡ï¼‰ï¼Œéš¾æ€ªå¹¿å‘Šå•†éƒ½æ’é˜Ÿä¹°å¥¹å®¶çš„å¹¿å‘Šä½ï¼Œæ®è¯´æœ‰çš„å¹¿å‘Šå•†ç”šè‡³å¼€å‡ºäº† 30w çš„å¹¿å‘Šè´¹ï¼ï¼ˆå•¥æ—¶å€™æˆ‘çš„æ–‡ç« ä¹Ÿèƒ½æœ‰è¿™ä¹ˆå¤šæµé‡å•Š ğŸ˜¢ï¼‰

### 5.3 ä¼šä¸ä¼šæ˜¯æ ‡é¢˜å…š

è¯´å®è¯ï¼Œç¬”è€…åœ¨åšåˆ†æçš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸Šé¢çš„æ•°æ®å¼‚å¸¸éœ‡æƒŠï¼Œä»–æ¯å¤©åˆ°åº•å‘çš„æ˜¯ä»€ä¹ˆæ ·çš„æ–‡ç« æ‰èƒ½æœ‰è¿™ä¹ˆåºå¤§çš„æµé‡å•Šã€‚

![](http://upload-images.jianshu.io/upload_images/5666077-325774ec18b6feaf?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

é«˜ä¸­è¯­æ–‡è€å¸ˆç»å¸¸è·Ÿæˆ‘ä»¬æèµ·ï¼Œä¸€ä¸ªå¥½çš„æ–‡ç« æ ‡é¢˜å¯ä»¥ç»™ä½ çš„æ–‡ç« åŠ åˆ†ä¸å°‘ã€‚æƒ³åˆ°è¿™æˆ‘å°±å¼€å§‹æ€€ç–‘è¿™å®¶ä¼™ä¼šä¸ä¼šæ˜¯ä¸€ä¸ªæ ‡é¢˜å…šï¼Ÿåˆæˆ–æ˜¯å®ƒçš„æ ‡é¢˜çœŸçš„é‚£ä¹ˆå¸å¼•äººï¼Ÿå®è·µæ˜¯æ£€éªŒæ•´ç†çš„å”¯ä¸€æ ‡å‡†ã€‚æ¥æ¥æ¥ï¼Œæ”¶èµ·ç¬‘å®¹ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹ã€‚

#### 5.3.1 ä»€ä¹ˆæ ·çš„æ–‡ç« æ ‡é¢˜æ›´è®¨å–œ

è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬çš„æ€è·¯å¦‚ä¸‹ï¼šè·å–åˆ°æ–‡ç« æ ‡é¢˜ï¼Œç„¶åè¿›è¡Œåˆ†è¯ã€åœç”¨è¯è¿‡æ»¤ã€ç»Ÿè®¡è¯é¢‘ï¼Œç”Ÿæˆè¯äº‘ã€‚è¿™äº›éƒ½æ˜¯ä¸Šç¯‡æ–‡ç« ä»‹ç»è¿‡çš„ï¼Œå¦‚æœä¸æ¸…æ¥šï¼Œç§»æ­¥[ã€Šæé¬¼è§æé€µâ€”â€”æˆ‘ç”¨ç¿Ÿå¤©ä¸´çš„è®ºæ–‡åšäº†åˆ†æã€‹](https://juejin.im/post/5c6e4cb5e51d4536ee336431)ï¼Œè¿™é‡Œç›´æ¥ä¸Šä»£ç ï¼š

```python
# é€‰æ‹©æ–‡ç« æ ‡é¢˜å¹¶åˆ†æ
def chooseMostPop50Titles(df):
    texts=[]
    for title in list(df['æ ‡é¢˜']):
        # é˜²æ­¢å‡ºç°æ²¡æœ‰æ ‡é¢˜çš„æ–‡ç« 
        if len(str(title))>3:
            if str(title) not in ['åˆ†äº«å›¾ç‰‡']:
                # åˆ†è¯ã€å»æ‰åœç”¨è¯
                text=cleanWord(str(title))
                texts.append(text)
    # å°†äºŒç»´æ•°ç»„å˜æˆä¸€ç»´æ•°ç»„
    title_cuts=reduce(operator.add, texts)

    # ç»Ÿè®¡æ¯ä¸ªè¯çš„è¯é¢‘
    counter = Counter(title_cuts)
    # é€‰å‡ºè¯é¢‘æœ€é«˜çš„50ä¸ª
    counter=counter.most_common(50)
    # è¾“å‡ºè¯é¢‘æœ€é«˜çš„50ä¸ªå•è¯
    pprint.pprint(counter)
    name = []
    value = []
    for count in counter:
        name.append(count[0])
        value.append(count[1])
    return drawWordCloud(name,value)

# æ•°æ®å¯è§†åŒ–ï¼ˆç”Ÿæˆè¯äº‘)
def drawWordCloud(name, value):
    wordcloud = WordCloud(width=800, height=400)
    wordcloud.add("æ ‡é¢˜è¯äº‘å›¾", name, value, word_size_range=[
                  20, 100], rotate_step=20)
    return wordcloud
```

è€ƒè™‘åˆ°ç¯‡å¹…çš„é—®é¢˜ï¼Œè¯é¢‘ç»Ÿè®¡çš„ç»“æœæˆ‘å°±ä¸æ”¾å‡ºæ¥äº†ï¼Œè¿™é‡Œç›´æ¥æ”¾å‡ºè¯äº‘å›¾ï¼š

![](http://upload-images.jianshu.io/upload_images/5666077-5800527281dba2e1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

çœ‹åˆ°è¿™å¼ è¯äº‘å›¾ï¼Œå¤§è‡´å°±èƒ½çŒœåˆ°è¯¥å…¬ä¼—å·é¢å‘çš„ä¸»è¦ç¾¤ä½“æ˜¯å“ªä¸€ç±»äººäº†ã€‚æœ‰å…´è¶£çš„å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€è¯´è¯´ä½ å¯¹è¿™å¼ è¯äº‘å›¾çš„æƒ³æ³•ã€‚

#### 5.3.2 æ ‡é¢˜å¤šé•¿æ¯”è¾ƒå¥½

æ ‡é¢˜èƒ½æŠ“ä½ç—›ç‚¹è‡ªç„¶æ˜¯å¥½äº‹ï¼Œä½†æ˜¯å’Œé•¿åº¦æœ‰æ²¡æœ‰å…³ç³»å‘¢ï¼Ÿï¼ˆè¿™ä¸ªéƒ¨åˆ†å¾ˆç®€å•ï¼Œå°±æ˜¯å½’ç±»ä¸‹é•¿åº¦ï¼Œæ‰€ä»¥ç›´æ¥æ”¾ä»£ç äº†ï¼‰

```python
# ç”»å‡ºæ ‡é¢˜é•¿åº¦å’Œç‚¹èµæ•°ä¹‹é—´çš„å…³ç³»
def drawTitleLenAndFavourite(df):
    v1 = [0]*6
    for i in range(len(df['æ ‡é¢˜'])):
        title_len = len(str(df['æ ‡é¢˜'][i]))
        if title_len >= 5 and title_len <= 8:
            v1[0] += df['ç‚¹èµ'][i]
        elif title_len >= 9 and title_len <= 12:
            v1[1] += df['ç‚¹èµ'][i]
        elif title_len >= 13 and title_len <= 16:
            v1[2] += df['ç‚¹èµ'][i]
        elif title_len >= 17 and title_len <= 20:
            v1[3] += df['ç‚¹èµ'][i]
        elif title_len >= 20 and title_len <= 24:
            v1[4] += df['ç‚¹èµ'][i]
        elif title_len >= 25:
            v1[5] += df['ç‚¹èµ'][i]
    attr = ['5-8', '9-12', '13-16', '17-20', '21-24', '24+']
    bar = Bar("æ ‡é¢˜é•¿åº¦å’Œç‚¹èµæ•°ä¹‹é—´çš„å…³ç³»", title_pos='center')
    bar.add("", attr, v1, is_label_show=True)
    return bar
```

å¯è§†åŒ–ç»“æœï¼š

![](http://upload-images.jianshu.io/upload_images/5666077-11abf8572aed3d01?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ç°åœ¨æƒ³æƒ³ï¼Œé«˜ä¸­è¯­æ–‡è€å¸ˆè¯´çš„æ ‡é¢˜ä¸å®œè¿‡é•¿ï¼Œä¹Ÿä¸å®œè¿‡çŸ­ï¼Œ13-16 å­—ä¹‹é—´æœ€é€‚å®œåŸæ¥ä¸æ˜¯å¿½æ‚ æˆ‘å•Šã€‚

### 5.4 ä»€ä¹ˆæ—¶å€™å‘æ–‡ç« æ¯”è¾ƒå¥½

æ¯ä¸ªäººçœ‹æ–‡ç« çš„æ—¶é—´éƒ½ä¸ç¡®å®šï¼Œä½†æ˜¯å¤§å¤šæ•°äººçš„ç©ºé—²æ—¶é—´è¿˜æ˜¯å·®ä¸å¤šçš„ï¼Œæ‰€ä»¥åˆ°è¿™å°±æœ‰äººä¼šé—®äº†ä»€ä¹ˆæ—¶å€™æ¨é€æ–‡ç« ä¼šæ¯”è¾ƒå¥½å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™ä¸ªå…¬ä¼—å·æ˜¯æ€ä¹ˆå®‰æ’çš„ã€‚

#### 5.4.1 å‘æ–‡æ•°é‡å’Œæ‰€åœ¨æ—¶é—´æ®µçš„å…³ç³»

ç²—ç•¥çš„æµè§ˆäº†ä¸‹æ•°æ®å‘ç°å¤§å¤šéƒ½æ˜¯åœ¨æ™šä¸Šï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘è§‰å¾—é‡‡ç”¨é¥¼çŠ¶å›¾æ¥å¯è§†åŒ–äºŒè€…ä¹‹é—´çš„å…³ç³»æ¯”è¾ƒå¥½ï¼ˆå…¶å®å°±æ˜¯æƒ³é¡ºä¾¿æ¢ä¸ªå›¾è¡¨è¯•è¯•ï¼‰

```python
# ç”»å‡ºå‘æ–‡æ•°é‡å’Œæ‰€åœ¨å°æ—¶ä¹‹é—´çš„é¥¼çŠ¶å…³ç³»å›¾
def drawPostHour(df):
    # è·å–å‘æ–‡æ—¶é—´
    list_hour = getPostHour(df)
    array = np.array(list_hour)
    # è·å–å‘æ–‡æ—¶é—´æœ€å¤šçš„5ä¸ªæ—¶é—´æ®µ
    attr = list(sorted(np.argsort(array)[-5:]))
    attr = ["{}æ—¶".format(i) for i in attr]
    # è·å–å‘æ–‡æ—¶é—´æœ€å¤šçš„5ä¸ªæ—¶é—´çš„æ•°é‡
    v1 = list(array[sorted(np.argsort(array)[-5:])])
    pie = Pie("å‘æ–‡æ—¶é—´åˆ†å¸ƒå›¾")
    pie.add("", attr, v1, is_label_show=True)
    return pie
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨`getPostHour()`è¿™ä¸ªå‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ªé›†åˆï¼Œæ€è·¯å’Œä¸Šé¢ç±»ä¼¼ï¼Œå…ˆç”Ÿæˆä¸€ä¸ªå…¨ä¸º 0 çš„åˆ—è¡¨ï¼Œåœ¨æ—¶é—´å†…çš„åŠ ä¸€å°±å¯ä»¥äº†ã€‚ä¸‹é¢æ˜¯ç”Ÿæˆçš„é¥¼å›¾ï¼š

![](http://upload-images.jianshu.io/upload_images/5666077-4a819899cab60754?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å¯ä»¥çœ‹åˆ°è¯¥å…¬ä¼—å·å¤§å¤šæ•°æ–‡ç« éƒ½æ˜¯åœ¨æ™šä¸Š 10 ç‚¹ã€11 ç‚¹å·¦å³æ¨é€çš„ï¼Œç»†æƒ³ä¸€ä¸‹ç¡®å®ä¹Ÿæ˜¯ã€‚å¤§å¤šæ•°ä¸Šç­æ—åœ¨ç¡è§‰ä¹‹å‰ä¹Ÿå°±æ˜¯è¿™ä¸ªæ—¶é—´æ®µèººåœ¨åºŠä¸Šåˆ·æ‰‹æœºï¼Œä¹…è€Œä¹…ä¹‹éƒ½è®©ç”¨æˆ·å…»æˆæ¯å¤©ç¡è§‰å‰å¿…çœ‹ä¸€ç¯‡æ–‡ç« çš„ä¹ æƒ¯äº†ï¼Œä¸å¾—ä¸è¯´è¿™ç§ç”¨æˆ·é»æ€§æ˜¯çœŸçš„å¼ºå•Šï¼

#### 5.4.2 ç”¨æˆ·ç‚¹èµé‡å¦‚ä½•

å…¬ä¼—å·æ¨æ–‡ç»™ç”¨æˆ·ï¼Œé‚£ç”¨æˆ·å¯¹æ–‡ç« çš„ååº”æ€ä¹ˆæ ·å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹ç”¨æˆ·ç‚¹èµéšå‘æ–‡æ—¶é—´çš„æŸ±çŠ¶å›¾ï¼š

![](http://upload-images.jianshu.io/upload_images/5666077-76662f3151b7cef6?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä»£ç çš„æ€è·¯å’Œä¹‹å‰çš„ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸æ”¾å‡ºæ¥äº†ï¼Œæ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªå…¬ä¼—å·çš„ç‚¹èµé‡è¿˜æ˜¯å¾ˆå¯è§‚çš„ã€‚

## 6. ç»“è¯­

é€šè¿‡ä¸Šè¿°å‡ ä¸ªåˆ†æï¼Œæˆ‘è§‰å¾—å¦‚æœæƒ³è®©å…¬ä¼—å·æœ‰æ›´å¤šçš„è¯»è€…å’Œé˜…è¯»é‡ä¸Šä¸€ä¸ªå°é˜¶å¯ä»¥ä»ä¸‹é¢ 2 ä¸ªè§’åº¦å»è€ƒè™‘ï¼š

- è¦èµ·ä¸€ä¸ªå¥½çš„æ ‡é¢˜ï¼Œè¿™ä¸ªæ ‡é¢˜ä¸€å®šè¦ç¬¦åˆä½ é¢å‘ç¾¤ä½“çš„å–œå¥½ï¼Œè€Œä¸”ä¸èƒ½å¤ªé•¿
- æ€è€ƒä¸€ä¸‹ä½ é¢å‘ç¾¤ä½“çš„ç©ºé—²æ—¶é—´ï¼Œåœ¨ç©ºé—²æ—¶é—´å†…æ¨é€æ–‡ç« ï¼Œé€æ¸è®©ç”¨æˆ·å¯¹å…¬ä¼—å·äº§ç”Ÿé»æ€§

æ­¤å¤–ï¼Œæœ¬æ–‡æ˜¯åŸºç¡€çš„æ¢ç´¢æ€§è´¨çš„æ•°æ®åˆ†ææ–‡ï¼Œä¸æ˜¯æ•°æ®åˆ†ææŠ¥å‘Šï¼Œé‡åœ¨å¯è¿ªæ€è·¯ï¼Œæˆäººä»¥æ¸”ï¼Œè€Œä¸”å—é™äºæ•°æ®è§„æ¨¡ï¼Œå¾—å‡ºç»“è®ºä¸æ˜¯æœ¬æ–‡çš„ç›®çš„ï¼Œå¯¹ç»“æœçš„åˆ†æåˆ†æ•£åœ¨å„ä¸ªéƒ¨åˆ†ï¼Œâ€œæ–‡æœ«ç»“è®ºæ§â€ä¸å–œå‹¿å–·ã€‚

> å®Œæ•´æºç å¯åœ¨å…¬ä¼—å·ï¼šã€Œ01 äºŒè¿›åˆ¶ã€åå°å›å¤ï¼šã€Œå…¬ä¼—å·æ•°æ®åˆ†æã€è·å–

---

â€œä¸‡æ°´åƒå±±éƒ½æ˜¯æƒ…ï¼Œç»™ä¸ªå…³æ³¨è¡Œä¸è¡Œ ğŸ‘‡â€

![](http://upload-images.jianshu.io/upload_images/5666077-3115d324eaba8d74?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
